<!-- Add New Container Modal -->
<div class="modal-backdrop hidden" id="newContainerModal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Collect New Container</h2>
            <button class="close-modal" id="closeNewContainerModalBtn">&times;</button>
        </div>
        <form id="newContainerForm">
             <div class="modal-body">
                <div class="form-group">
                    <label for="containerNumber">Container Number</label>
                    <input type="text" id="containerNumber" placeholder="e.g., MSMU1234567" required>
                </div>
                <div class="form-group">
                    <label for="bookingNumber">Booking Number</label>
                    <select id="bookingNumber" required>
                        <option value="">Loading Bookings...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="truck">Truck Used</label>
                    <select id="truck" required>
                        <option value="">Loading Trucks...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="chassis">Chassis Used</label>
                    <select id="chassis" required>
                        <option value="">Loading Chassis...</option>
                    </select>
                </div>
                <p class="form-error" id="formError"></p>
            </div>
            <div class="modal-footer">
                <button type="button" class="action-btn btn-secondary" id="cancelNewContainerModalBtn">Cancel</button>
                <button type="submit" class="action-btn btn-primary">Save Container</button>
            </div>
        </form>
    </div>
</div>

<!-- Container Details Modal -->
<div class="modal-backdrop hidden" id="containerDetailsModal">
    <div class="modal-content-lg">
        <div class="modal-header">
            <h2 id="detailsModalTitle">Container Details</h2>
            <button class="close-modal" id="closeDetailsModalBtn">&times;</button>
        </div>
        <div class="modal-body">
            <div class="details-grid">
                <!-- Left side: Current Info & Update Form -->
                <div class="details-main">
                    <h3>Current Status</h3>
                    <div id="currentContainerInfo">
                        <!-- Current data will be populated here -->
                    </div>
                    <hr>
                    <div id="updateStatusContainer" class="manager-only admin-only">
                         <!-- Dynamic form for updating status will be injected here -->
                    </div>
                </div>
                <!-- Right side: Event History -->
                <div class="details-history">
                    <h3>Event History</h3>
                    <div id="eventHistoryList">
                        <!-- History will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Sidebar Backdrop for Mobile -->
<div class="sidebar-backdrop" id="sidebarBackdrop"></div>
